import { useGSAP } from '@gsap/react';
import React, { useRef } from 'react';
import "./InitialLoader.scss";
import gsap from 'gsap';
import { animateLines, animateText, exitAnimation } from './InitialLoader.utils';

const InitialLoader = ({ timeline }) => {
    const loaderOuter = useRef();
    const loader = useRef();
    const loaderCircle = useRef();
    const loaderText = useRef([]);
    const circleLine = useRef([]);

    useGSAP(() => {
        if (timeline) {
            timeline
                .add(animateLines(circleLine))
                .add(animateText(loaderText), "-=1")
                .add(exitAnimation(loader), "-=0.5")
        }
    }, { scope: loaderOuter, dependencies: [timeline] })

    return (
        <>
            <div ref={loaderOuter} className="loader_outer">
                <div ref={loader}>
                    <svg width="116" height="50" viewBox="0 0 116 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="Group 1171277318" ref={loaderCircle}>
                            <path ref={el => circleLine.current[0] = el} id="Vector_6" d="M45.3496 38.73C47.9296 34.78 49.4196 30.05 49.4196 24.97C49.4196 19.89 47.9096 15.16 45.3496 11.21V38.72V38.73Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[1] = el} id="Vector_7" d="M19.7498 0.47998C18.9198 0.64998 18.1198 0.85998 17.3398 1.09998V48.83C18.1198 49.07 18.9498 49.28 19.7498 49.45V0.47998Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[2] = el} id="Vector_8" d="M23.6495 0C22.9395 0.02 22.2295 0.1 21.5195 0.19V49.78C22.2295 49.88 22.9395 49.92 23.6495 49.97V0Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[3] = el} id="Vector_9" d="M15.7796 1.6499C14.8296 2.0099 13.9296 2.4399 13.0596 2.9199V47.0299C13.9396 47.5099 14.8296 47.9399 15.7796 48.2999V1.6499Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[4] = el} id="Vector_10" d="M8.75 44.0401C9.74 44.8801 10.78 45.6401 11.87 46.3401V3.59009C10.76 4.26009 9.72 5.03009 8.75 5.89009V44.0501V44.0401Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[5] = el} id="Vector_11" d="M8.04004 6.51001C6.74004 7.71001 5.58004 9.05001 4.54004 10.51V39.43C5.56004 40.89 6.74004 42.23 8.04004 43.43V6.51001Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[6] = el} id="Vector_12" d="M44.8703 10.5C43.5803 8.66 42.0403 7 40.3103 5.58V13.97C40.0703 13.63 39.8303 13.3 39.6003 12.99V5.02C38.4503 4.14 37.2203 3.35 35.9303 2.69V9.11C35.5503 8.82 35.1503 8.55 34.7503 8.28V2.12C33.6603 1.63 32.5303 1.22 31.3703 0.9V6.51C30.8703 6.34 30.3503 6.17 29.8303 6.03V0.52C28.5203 0.23 27.1603 0.06 25.7803 0V49.95C28.9603 49.81 31.9903 49.07 34.7503 47.8V41.7C35.1503 41.43 35.5503 41.17 35.9303 40.88V47.22C37.2203 46.56 38.4503 45.81 39.6003 44.93V36.94C39.8303 36.63 40.0703 36.29 40.3103 35.96V44.35C42.0403 42.94 43.6003 41.3 44.9003 39.45V10.5H44.8703ZM27.4903 7.13C28.3903 7.27 29.2403 7.49 30.0903 7.75V42.18C29.2403 42.44 28.3903 42.65 27.4903 42.8V7.13ZM31.3703 49.02C30.8703 49.16 30.3503 49.28 29.8303 49.4V43.85C30.3503 43.71 30.8703 43.56 31.3703 43.37V49.02ZM34.3003 40.19C33.4003 40.76 32.4503 41.27 31.4603 41.67V8.25C32.4503 8.66 33.4003 9.16 34.3003 9.74V40.19ZM38.5603 36.36C37.6303 37.51 36.5503 38.56 35.3603 39.45V10.48C36.5503 11.36 37.6303 12.41 38.5603 13.56V36.36ZM40.7803 32.82C40.3803 33.68 39.9103 34.5 39.3603 35.26V14.64C39.9103 15.41 40.3803 16.22 40.7803 17.08C41.9403 19.45 42.5803 22.13 42.5803 24.95C42.5803 27.77 41.9203 30.43 40.7803 32.82Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[7] = el} id="Vector_13" d="M4.07 11.2C1.51 15.14 0 19.88 0 24.98C0 30.08 1.51 34.79 4.07 38.74V11.2Z" fill="#001D6B" />
                            <path ref={el => circleLine.current[8] = el} id="Vector_14" d="M45.3496 38.73C47.9296 34.78 49.4196 30.05 49.4196 24.97C49.4196 19.89 47.9096 15.16 45.3496 11.21V38.72V38.73Z" fill="#001D6B" />
                        </g>
                        <g id="Layer_1" clipPath="url(#clip0_142_14)">
                            <path ref={el => loaderText.current[0] = el} id="Vector" d="M116 13.6101H112.19V35.8601H116V13.6101Z" fill="#001D6B" />
                            <path ref={el => loaderText.current[1] = el} id="Vector_2" d="M104.24 36.21C102.61 36.21 101.19 35.84 99.9696 35.09C98.7496 34.35 97.7996 33.34 97.1196 32.06C96.4396 30.78 96.0996 29.38 96.0996 27.83C96.0996 26.28 96.4396 24.8 97.1196 23.57C97.8196 22.32 98.7596 21.33 99.9396 20.6C101.14 19.88 102.48 19.51 103.95 19.51C105.19 19.51 106.27 19.72 107.2 20.13C108.15 20.54 108.95 21.11 109.61 21.83C110.27 22.55 110.77 23.39 111.12 24.33C111.47 25.25 111.64 26.25 111.64 27.33C111.64 27.6 111.62 27.89 111.58 28.18C111.56 28.47 111.51 28.73 111.43 28.94H99.2296V26H109.28L107.48 27.38C107.65 26.48 107.61 25.68 107.33 24.97C107.08 24.26 106.65 23.71 106.05 23.29C105.47 22.88 104.76 22.67 103.93 22.67C103.1 22.67 102.43 22.88 101.81 23.29C101.19 23.68 100.72 24.27 100.39 25.05C100.08 25.81 99.9596 26.74 100.04 27.84C99.9596 28.82 100.09 29.69 100.42 30.46C100.77 31.2 101.27 31.78 101.93 32.19C102.61 32.6 103.38 32.81 104.25 32.81C105.12 32.81 105.86 32.62 106.46 32.25C107.08 31.88 107.56 31.38 107.91 30.75L110.99 32.28C110.68 33.04 110.2 33.72 109.54 34.31C108.88 34.9 108.1 35.36 107.19 35.69C106.3 36.02 105.31 36.19 104.23 36.19L104.24 36.21Z" fill="#001D6B" />
                            <path ref={el => loaderText.current[2] = el} id="Vector_3" d="M80.9697 35.8601V13.6101H84.7797V28.1901L83.3197 27.7501L90.7597 19.8701H95.4997L89.6597 26.3101L95.6097 35.8601H91.2597L86.0797 27.5701L88.3497 27.1001L83.5797 32.2701L84.7797 29.9201V35.8601H80.9697Z" fill="#001D6B" />
                            <path ref={el => loaderText.current[3] = el} id="Vector_4" d="M79.2802 23.57C78.5402 22.32 77.5402 21.33 76.2802 20.61C75.0202 19.88 73.6202 19.52 72.0702 19.52C70.5202 19.52 69.0902 19.88 67.8302 20.61C66.5702 21.33 65.5602 22.32 64.8102 23.57C64.0702 24.83 63.7002 26.26 63.7002 27.86C63.7002 29.46 64.0702 30.9 64.8102 32.16C65.5602 33.41 66.5702 34.4 67.8302 35.12C69.1102 35.85 70.5202 36.21 72.0702 36.21C73.6202 36.21 75.0002 35.85 76.2502 35.12C77.5102 34.4 78.5202 33.41 79.2802 32.16C80.0302 30.9 80.4102 29.47 80.4102 27.86C80.4102 26.25 80.0302 24.81 79.2802 23.57ZM75.8502 30.36C75.4802 31.09 74.9702 31.66 74.3102 32.07C73.6702 32.48 72.9202 32.68 72.0702 32.68C71.2202 32.68 70.4302 32.48 69.7702 32.07C69.1202 31.66 68.5902 31.09 68.2102 30.36C67.8402 29.62 67.6502 28.79 67.6502 27.86C67.6502 26.93 67.8402 26.1 68.2102 25.4C68.5902 24.67 69.1202 24.1 69.7702 23.69C70.4302 23.26 71.2002 23.04 72.0702 23.04C72.9402 23.04 73.6702 23.26 74.3102 23.69C74.9702 24.1 75.4802 24.67 75.8502 25.4C76.2402 26.1 76.4302 26.92 76.4302 27.86C76.4302 28.8 76.2402 29.62 75.8502 30.36Z" fill="#001D6B" />
                            <path ref={el => loaderText.current[4] = el} id="Vector_5" d="M61.3302 36.04C59.5502 36.04 58.1602 35.55 57.1702 34.57C56.2002 33.57 55.7202 32.17 55.7202 30.37V23.32H52.9902V19.88H53.2802C54.0502 19.88 54.6602 19.67 55.0802 19.26C55.5102 18.85 55.7202 18.25 55.7202 17.47V16.24H59.5302V19.88H63.1602V23.32H59.5302V30.17C59.5302 30.7 59.6202 31.15 59.7902 31.52C59.9802 31.89 60.2702 32.18 60.6602 32.37C61.0702 32.57 61.5802 32.66 62.2002 32.66C62.3402 32.66 62.4902 32.66 62.6602 32.63C62.8502 32.61 63.0402 32.59 63.2102 32.57V35.86C62.9402 35.9 62.6302 35.94 62.2802 35.98C61.9302 36.02 61.6102 36.04 61.3202 36.04H61.3302Z" fill="#001D6B" />
                        </g>
                        <defs>
                            <clipPath id="clip0_142_14">
                                <rect width="116" height="49.98" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                </div>
                {/* <div className="progress">
                    <div style={{
                        width: (progress * 100) + "%",
                    }}
                        className="progress_done"
                    />
                </div> */}
            </div>
        </>
    )
}

export default InitialLoader
